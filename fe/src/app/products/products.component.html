<div class="w-100" *ngIf="!isLoading">
  <div class="content-container mx-auto">
    <p class="text-secondary mt-2">
      <app-breadcrumbs [breadcrumbs]="breadcrumbs"></app-breadcrumbs>
    </p>
    <h1 class="mx-xs-3">
      {{selectedGroup.name}}
    </h1>

    <div class="row py-5">
      <div id="accordion" class="col-4 col-xl-2">
        <div class="card" *ngFor="let c of selectedCategories; let i=index;">
          <div class="card-header  collapsed p-0" id="heading-{{c.id}}" [ngClass]="{'bg--primary text-white': activeCategoryIndex === i, 'bg-white text--primary': activeCategoryIndex !== i}">
            <h5 class="mb-0">
              <button class="btn btn-link btn-block text-left no-decoration" data-toggle="!collapse" [attr.data-target]="'#collapse-'+c.id" aria-expanded="false" [attr.aria-controls]="'collapse-'+c.id" (click)="setActiveCategory(c.id, i); setActiveSubcategory(c.subcategories[0].id, 0);" [ngClass]="{'text-white': activeCategoryIndex === i, 'text--primary': activeCategoryIndex !== i}">
                {{c.name}}
                <span class="float-right mr-2">{{(activeCategoryIndex !== i) ? '+' : '-'}}</span>
              </button>
            </h5>
          </div>
          <div id="collapse-{{c.id}}" class="collapse" [ngClass]="{'show': i === activeCategoryIndex}" [attr.aria-labelledby]="'heading-'+c.id" data-parent="#accordion">
            <div class="card-body p-0">
              <ul class="list-group">
                <li class="list-group-item m-0">
                  <button class="btn btn-block text-left" *ngFor="let sc of c.subcategories; let in=index" (click)="setActiveSubcategory(sc.id, in)" [ngClass]="{'btn-secondary no-outline': activeSubcategoryIndex === in && activeSubcategoryId === sc.id, 'btn-light text--primary pl-4' : !(activeSubcategoryIndex === in && activeSubcategoryId === sc.id)}">
                    {{sc.name}}
                  </button></li>
              </ul>
            </div>
          </div>
        </div>
      </div>

      <div class="col-8 col-xl-10 px-4" id="main">
        <div class="row scrollable" *ngIf="products && products.length > 0">
          <div class="col-12 col-xl-4" *ngFor="let p of products">
            <!-- selectedSubcategories[activeSubcategoryIndex].products -->
            <div class="card mx-3 mb-4" *ngIf="p">
              <div class="card-body">
                <!-- <a routerLink="`/products/`"> -->
                <div class="img-hover-zoom img-hover-zoom--xyz">
                  <img class="card-img" src="assets/images/{{p.image}}" alt="{{p.name | translate}}" (click)="openProductModal(p.id)" />
                </div>
                <!-- </a> -->
              </div>
              <div class="d-flex flex-column justify-content-center">
                <h4 class="card-title transparent-overlay text-center">
                  {{p.name | translate}}
                </h4>
              </div>
            </div>
          </div>
        </div>
        <div class="col-12 col-xl-4 p-0 mx-auto" *ngIf="!(products && products.length > 0)">
          <div class="no-items text-center w-100">{{'no-items' | translate }}</div>
        </div>
      </div>
    </div>
  </div>
</div>

<app-loader [isLoading]="isLoading" class="mx-auto my-auto" style="height: 100%;"></app-loader>
